A bunch of utility functions and definitions.